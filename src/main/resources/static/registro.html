<!DOCTYPE html>
<html lang="en">
<head>
  <title>Registro</title>
  <link rel="stylesheet" href="styles/style.css">
</head>
<body>

<div class="main">
  <h1>WorkBeats</h1>
  <h3> Registro de Usuario </h3>
  <form id="registroForm">
    <label for="name">Nombre:</label>
    <input type="text" id="name" name="name" required>
    <br>

    <label for="email">Email:</label>
    <input type="email" id="email" name="email" required>
    <br>

    <label for="password">Password:</label><br>
    <input type="password" name="password" id="password">

    <button type="submit">Submit</button>
  </form>
</div>



<script>
  document.addEventListener("DOMContentLoaded", function (){
    document.getElementById("registroForm").addEventListener("submit", function (e){
      e.preventDefault();

      console.log("name:", document.getElementById("name"));
      console.log("email:", document.getElementById("email"));
      console.log("password:", document.getElementById("password"));
      const data ={
        nombre: document.getElementById("name").value,
        email : document.getElementById("email").value,
        password : document.getElementById("password").value
      };

      fetch("usuarios/crear",{
        method : "POST",
        headers: {
          "Content-Type": "application/json"
        },
        body : JSON.stringify(data)
      })
              .then(res => res.text())
              .then(msg =>{
                alert(msg);
                window.location.href ="/login.html"; //vuelve al login despues de registrarse
              })
              .catch(err => console.error(err))
    });
  });

</script>

</body>
</html>